@use "sass:map";

@import 'src/assets/stylesheets/mixins/bottleneck';
@import 'src/assets/stylesheets/mixins/mixins';

$background-offset: 20px;
$background-offset-hover: 10px;

// pix-grid-element component stylesheet
div.component-pix-grid-element {
  width: $tile-size;
  height: $tile-size;

  p.icon-inner {
    position: relative;
    width: 100%;
    font-size: 44px;
    text-align: center;
    line-height: $tile-size;
    z-index: 20;
  }

  div.icon-wrapper {
    position: relative;

    &::before {
      content: '';
      @include alignment_old();
      width: $tile-size - $background-offset;
      height: $tile-size - $background-offset;
      @extend .rounded-3;
      @include background-color(3);
      transition: width 300ms, height 300ms, background-color 200ms, border-radius 200ms;
      z-index: 10;
    }

    &.selected::before {
      @include background-color(4);
    }

    &[data-grid-element-status="solved"]::before {
      @include background-color(6, $background-color-alpha-focused);
    }

    &[data-grid-element-status="2"]::before {
      @include background-color(7, $background-color-alpha-unfocused);
    }

    &[data-grid-element-status="1"]::before {
      @include background-color(8, $background-color-alpha-unfocused);
    }

    &[data-grid-element-status="failed"]::before {
      @include background-color(9, $background-color-alpha-focused);
    }
  }

  div.grid-element-inner {
    perspective: 1000px;

    div.grid-element-flip {
      position: relative;
      transform-style: preserve-3d;
      transition: transform 400ms;

      .front-face,
      .back-face {
        position: relative;
        backface-visibility: hidden;
        transform-style: preserve-3d;
        z-index: 20;
      }

      .back-face {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        user-select: none;
        pointer-events: none;
        transform: rotateX(180deg);
        z-index: 30;
      }

      &.do-flip {
        transform: rotateX(-180deg);

        .front-face {
          user-select: none;
          pointer-events: none;
        }
      }
    }
  }

  &:hover div.icon-wrapper:not(.locked) {
    cursor: pointer;

    &::before {
      width: $tile-size - $background-offset-hover;
      height: $tile-size - $background-offset-hover;
      @extend .rounded-4;
    }

    &[data-grid-element-status="2"]::before {
      @include background-color(7, $background-color-alpha-focused);
    }

    &[data-grid-element-status="1"]::before {
      @include background-color(8, $background-color-alpha-focused);
    }
  }
}
